---
notifications:
  email: false

os: linux
dist: bionic
language: python

python: 3.7
cache:
  pip: true

env:
  global:
    - CIBW_TEST_COMMAND="python -m unittest discover -s {project}/python/test/ -t {project} -v"
    - CMAKE_BUILD_PARALLEL_LEVEL=2
    - CIBW_SKIP="cp27-* cp34-* cp35-* pp*"

script: python3 -m cibuildwheel --output-dir wheelhouse

jobs:
  include:
    # - arch: arm64
    #   services: docker
    #   install:
    #     - python3 -m pip install -U pip
    #     - python3 -m pip install -U twine cibuildwheel

    # - arch: ppc64le
    #   services: docker
    #   install:
    #     - pip install -U pip
    #     - pip install -U twine cibuildwheel

    - arch: s390x
      services: docker
      install:
        - curl https://sh.rustup.rs -sSf | sh -s -- -y
        - export PATH=$PATH:~/.cargo/bin
        - python3 -m pip install -U pip
        - python3 -m pip install -U twine cibuildwheel
